<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="app.name">Pup Cid's Little TikTok Helper</title>
    <link rel="stylesheet" href="/css/tailwind.output.css">
    <link rel="stylesheet" href="/css/navigation.css">
    <link rel="stylesheet" href="/css/wiki.css">
    <link rel="stylesheet" href="/css/themes.css">
    <style>
        /* Plugin Manager Modern Styles - Theme-Aware */
        .plugin-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
        }
        
        .plugin-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg), 0 0 0 1px var(--color-active-border);
            border-color: var(--color-active-border) !important;
        }

        .plugin-action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
            white-space: nowrap;
        }

        .plugin-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            filter: brightness(1.1);
        }

        .plugin-action-btn:active {
            transform: translateY(0);
        }

        .plugin-filter-btn:hover {
            background: var(--color-active-bg) !important;
            border-color: var(--color-active-border) !important;
            color: var(--color-accent-primary) !important;
        }

        .plugin-filter-btn.active {
            background: var(--color-active-bg) !important;
            border-color: var(--color-active-border) !important;
            color: var(--color-accent-primary) !important;
        }

        #plugin-search:focus {
            outline: none;
            border-color: var(--color-input-focus);
            box-shadow: 0 0 0 3px var(--color-active-bg);
        }

        #plugin-sort:focus {
            outline: none;
            border-color: var(--color-input-focus);
            box-shadow: 0 0 0 3px var(--color-active-bg);
        }

        /* Smooth animations for filter transitions */
        #plugins-container {
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Stats card improvements - Theme-Aware */
        .stat-card {
            background: var(--color-bg-card);
            border: 1px solid var(--color-border);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--color-accent-primary);
        }

        /* Topbar Language Switcher - Theme-Aware */
        .topbar-language-switcher {
            position: relative;
        }

        .topbar-language-select {
            appearance: none;
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            color: var(--color-text-primary);
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            padding: 6px 32px 6px 12px;
            transition: all 0.2s ease;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23888' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
        }

        .topbar-language-select:hover {
            background: var(--color-bg-hover);
            border-color: var(--color-accent-primary);
        }

        .topbar-language-select:focus {
            outline: none;
            border-color: var(--color-accent-primary);
            box-shadow: 0 0 0 3px var(--color-active-bg);
        }

        .topbar-language-select option {
            background: var(--color-bg-secondary);
            color: var(--color-text-primary);
            padding: 8px;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .topbar-language-select {
                padding: 6px 24px 6px 8px;
                font-size: 0.8rem;
            }
        }

        /* Plugin Notice Styles */
        .plugin-notice {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.05) 100%);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 1.5rem;
            animation: slideInDown 0.4s ease-out;
            transition: opacity 0.3s ease, transform 0.3s ease;
        }

        .plugin-notice-content {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
        }

        .plugin-notice-icon {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(59, 130, 246, 0.2);
            border-radius: 8px;
            color: #60a5fa;
        }

        .plugin-notice-icon i {
            width: 24px;
            height: 24px;
        }

        .plugin-notice-text {
            flex: 1;
        }

        .plugin-notice-title {
            font-size: 1rem;
            font-weight: 600;
            color: #60a5fa;
            margin: 0 0 0.5rem 0;
        }

        .plugin-notice-message {
            font-size: 0.875rem;
            color: var(--color-text-secondary);
            line-height: 1.5;
            margin: 0;
        }

        .plugin-notice-dismiss {
            flex-shrink: 0;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 6px;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--color-text-secondary);
        }

        .plugin-notice-dismiss:hover {
            background: rgba(255, 255, 255, 0.2);
            color: var(--color-text-primary);
            transform: scale(1.1);
        }

        .plugin-notice-dismiss i {
            width: 18px;
            height: 18px;
        }

        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .plugin-notice {
                padding: 0.875rem;
            }

            .plugin-notice-content {
                gap: 0.75rem;
            }

            .plugin-notice-icon {
                width: 36px;
                height: 36px;
            }

            .plugin-notice-title {
                font-size: 0.9rem;
            }

            .plugin-notice-message {
                font-size: 0.8125rem;
            }
        }
    </style>
    <script src="/js/lucide.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <!-- i18n Client (load early) -->
    <script src="/js/i18n-client.js"></script>
</head>
<body class="bg-gray-900 text-white">

    <!-- Main Layout Container -->
    <div class="flex h-screen">

        <!-- Sidebar Navigation -->
        <aside id="sidebar" class="sidebar sidebar-expanded">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <i data-lucide="dog" class="sidebar-logo-icon"></i>
                    <span class="sidebar-logo-text">LTTH</span>
                </div>
                <button id="sidebar-toggle" class="sidebar-toggle-btn">
                    <i data-lucide="panel-left"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <!-- Dashboard -->
                <a href="#" class="sidebar-item active" data-view="dashboard">
                    <i data-lucide="layout-dashboard"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.dashboard">Dashboard</span>
                </a>

                <!-- Category: Automations -->
                <div class="sidebar-category">
                    <span class="sidebar-category-label" data-i18n="navigation.automations">Automations</span>
                </div>
                <a href="#" class="sidebar-item" data-view="events">
                    <i data-lucide="activity"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.events">Events</span>
                </a>
                <a href="#" class="sidebar-item" data-view="flows">
                    <i data-lucide="git-branch"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.flows">Flows</span>
                </a>
                <a href="#" class="sidebar-item" data-view="goals">
                    <i data-lucide="target"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.goals">Goals</span>
                </a>
                <a href="#" class="sidebar-item" data-view="lastevent-spotlight" data-plugin="lastevent-spotlight">
                    <i data-lucide="eye"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.lastevent">LastEvent</span>
                </a>
                <a href="#" class="sidebar-item" data-view="clarityhud" data-plugin="clarityhud">
                    <i data-lucide="layout"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.clarityhud">ClarityHUD</span>
                </a>

                <!-- Category: Interaktive Effekte -->
                <div class="sidebar-category">
                    <span class="sidebar-category-label" data-i18n="navigation.effects">Interactive Effects</span>
                </div>
                <a href="#" class="sidebar-item" data-view="tts">
                    <i data-lucide="mic"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.tts">TTS</span>
                </a>
                <a href="#" class="sidebar-item" data-view="soundboard">
                    <i data-lucide="music"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.soundboard">Soundboard</span>
                </a>
                <a href="#" class="sidebar-item" data-view="emoji-rain" data-plugin="emoji-rain">
                    <i data-lucide="cloud-rain"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.emoji_rain">Emoji Rain</span>
                </a>

                <!-- Category: Plugins & Tools -->
                <div class="sidebar-category">
                    <span class="sidebar-category-label">Plugins & Tools</span>
                </div>
                <a href="#" class="sidebar-item" data-view="multi-guest" data-plugin="vdoninja">
                    <i data-lucide="users"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.multi_guest">Multi-Guest</span>
                    <span class="sidebar-item-text" data-i18n="navigation.vdoninja">VDO.Ninja</span>
                </a>
                <a href="#" class="sidebar-item" data-view="gift-milestone" data-plugin="gift-milestone">
                    <i data-lucide="gift"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.gift_milestone">Gift Milestone</span>
                </a>
                <a href="#" class="sidebar-item" data-view="multicam" data-plugin="multicam">
                    <i data-lucide="video"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.multi_cam">Multi-Cam</span>
                </a>
                <a href="#" class="sidebar-item" data-view="osc-bridge" data-plugin="osc-bridge">
                    <i data-lucide="gamepad-2"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.osc_bridge">OSC-Bridge</span>
                </a>
                <a href="#" class="sidebar-item" data-view="hybridshock" data-plugin="hybridshock">
                    <i data-lucide="zap"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.hybridshock">HybridShock</span>
                </a>
                <a href="#" class="sidebar-item" data-view="openshock" data-plugin="openshock">
                    <i data-lucide="zap"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.openshock">OpenShock</span>
                </a>
                <a href="#" class="sidebar-item" data-view="quiz-show" data-plugin="quiz-show">
                    <i data-lucide="help-circle"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.quiz_show">Quiz Show</span>
                </a>
                <a href="#" class="sidebar-item" data-view="viewer-xp" data-plugin="viewer-xp">
                    <i data-lucide="award"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.viewer_xp">Viewer XP</span>
                </a>
                <a href="#" class="sidebar-item" data-view="resource-monitor" data-plugin="resource-monitor">
                    <i data-lucide="cpu"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.resources">Resources</span>
                </a>
                <a href="#" class="sidebar-item" data-view="weather-control" data-plugin="weather-control">
                    <i data-lucide="cloud-rain"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.weather_control">Weather Control</span>
                </a>

                <a href="#" class="sidebar-item" data-view="plugins">
                    <i data-lucide="plug"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.plugin_manager">Plugin Manager</span>
                    <span class="sidebar-item-text" data-i18n="navigation.plugins">Plugin Manager</span>
                </a>

                <!-- Settings (Fixed at bottom) -->
                <div class="sidebar-spacer"></div>
                <a href="#" class="sidebar-item" data-view="wiki">
                    <i data-lucide="book-open"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.wiki">Wiki</span>
                </a>
                <a href="#" class="sidebar-item" data-view="settings">
                    <i data-lucide="settings"></i>
                    <span class="sidebar-item-text" data-i18n="navigation.settings">Settings</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">

            <!-- Topbar (Reduced) -->
            <header class="topbar">
                <div class="topbar-left">
                    <h1 class="topbar-title" data-i18n="app.name">Pup Cid's Little TikTok Helper</h1>
                </div>
                <div class="topbar-right">
                    <div class="topbar-status">
                        <span id="connection-status" class="status-badge status-disconnected">
                            <i data-lucide="circle"></i>
                            <span data-i18n="dashboard.disconnected">Disconnected</span>
                        </span>
                    </div>
                    <!-- Language Switcher with Flags -->
                    <div class="topbar-language-switcher">
                        <select id="topbar-language-selector" class="topbar-language-select" aria-label="Select Language">
                            <option value="en">ðŸ‡¬ðŸ‡§ EN</option>
                            <option value="de">ðŸ‡©ðŸ‡ª DE</option>
                            <option value="es">ðŸ‡ªðŸ‡¸ ES</option>
                            <option value="fr">ðŸ‡«ðŸ‡· FR</option>
                        </select>
                    </div>
                    <button id="profile-btn" class="topbar-profile-btn">
                        <i data-lucide="user"></i>
                        <span id="current-profile-name">default</span>
                    </button>
                    <button id="topbar-settings-btn" class="topbar-icon-btn" data-i18n-title="settings.global_settings" title="Global Settings">
                        <i data-lucide="settings"></i>
                    </button>
                </div>
            </header>

            <!-- Content Views Container -->
            <div class="content-container">

                <!-- View: Dashboard -->
                <div id="view-dashboard" class="content-view active">

                    <!-- Plugin Notice - Dismissible Info -->
                    <div id="plugin-notice" class="plugin-notice" style="display: none;">
                        <div class="plugin-notice-content">
                            <div class="plugin-notice-icon">
                                <i data-lucide="info"></i>
                            </div>
                            <div class="plugin-notice-text">
                                <h3 class="plugin-notice-title" data-i18n="dashboard.plugin_notice.title">Plugin Notice</h3>
                                <p class="plugin-notice-message" data-i18n="dashboard.plugin_notice.message">All enabled plugins should work without bugs. You are welcome to test inactive plugins, but please expect bugs.</p>
                            </div>
                            <button id="dismiss-plugin-notice" class="plugin-notice-dismiss" aria-label="Dismiss notice">
                                <i data-lucide="x"></i>
                            </button>
                        </div>
                    </div>

                    <!-- 1. TikTok Live Connection Section -->
                    <section class="dashboard-section connection-section">
                        <h2 class="section-title">
                            <i data-lucide="wifi"></i>
                            <span data-i18n="dashboard.tiktok_live_connection">TikTok Live Connection</span>
                        </h2>
                        <div class="connection-controls">
                            <input type="text" id="username-input" placeholder="TikTok Username (ohne @)" data-i18n="dashboard.username_placeholder"
                            <input type="text" id="username-input" data-i18n-placeholder="dashboard.username_placeholder" placeholder="TikTok Username (without @)"
                                   class="connection-input">
                            <button id="connect-btn" class="btn btn-primary">
                                <i data-lucide="link"></i>
                                <span data-i18n="dashboard.connect">Connect</span>
                            </button>
                            <button id="disconnect-btn" class="btn btn-danger" disabled>
                                <i data-lucide="link-2-off"></i>
                                <span data-i18n="dashboard.disconnect">Disconnect</span>
                            </button>
                        </div>
                        <div id="connection-info" class="connection-info"></div>
                        
                        <!-- Stream Time Debug Panel -->
                        <div id="stream-time-debug" style="margin-top: 1rem; padding: 0.75rem; background: rgba(59, 130, 246, 0.1); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; display: none;">
                            <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                                <i data-lucide="clock" style="width: 16px; height: 16px; color: #3b82f6;"></i>
                                <span style="font-weight: 600; color: #60a5fa;" data-i18n="dashboard.stream_time_debug_info">Stream Time Debug Info</span>
                            </div>
                            <div style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
                                <div><strong data-i18n="dashboard.stream_start_time">Stream Start Time:</strong> <span id="debug-stream-start">--</span></div>
                                <div><strong data-i18n="dashboard.current_duration">Current Duration:</strong> <span id="debug-stream-duration">--</span></div>
                                <div><strong data-i18n="dashboard.detection_method">Detection Method:</strong> <span id="debug-detection-method">--</span></div>
                                <div style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid rgba(255,255,255,0.1);">
                                    <em>This panel shows how the stream start time was detected. If it shows "Connection Time" instead of a roomInfo field, the API may not be providing stream start time.</em>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Connection Diagnostics Panel -->
                        <div class="connection-diagnostics" style="margin-top: 1rem;">
                            <button id="run-diagnostics-btn" class="btn btn-secondary" style="width: 100%;">
                                <i data-lucide="activity"></i>
                                <span data-i18n="dashboard.run_diagnostics">Run Connection Diagnostics</span>
                            </button>
                            <div id="diagnostics-result" style="margin-top: 1rem; display: none;">
                                <h3 style="font-size: 0.9rem; margin-bottom: 0.5rem; color: var(--text-secondary);" data-i18n="dashboard.diagnostics_result">
                                    Diagnostics Result
                                </h3>
                                <div id="diagnostics-content" style="background: var(--bg-secondary); padding: 1rem; border-radius: 8px; font-size: 0.85rem;"></div>
                            </div>
                            <div id="connection-health" style="margin-top: 1rem; padding: 0.75rem; border-radius: 8px; display: none;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <i data-lucide="heart-pulse" style="width: 16px; height: 16px;"></i>
                                    <span id="health-status" style="font-weight: 600;"></span>
                                </div>
                                <div id="health-details" style="margin-top: 0.5rem; font-size: 0.85rem; color: var(--text-secondary);"></div>
                            </div>
                        </div>
                    </section>

                    <!-- 2. Quick Actions Section (Compact Button Grid) -->
                    <section class="dashboard-section actions-section">
                        <h2 class="section-title">
                            <i data-lucide="zap"></i>
                            <span data-i18n="dashboard.quick_actions">Quick Actions</span>
                        </h2>
                        <div class="quick-actions-button-grid">
                            <button class="quick-action-btn" id="quick-tts-btn" data-action="tts" data-state="on">
                                <i data-lucide="mic"></i>
                                <span data-i18n="dashboard.quick_action.tts">Text-to-Speech</span>
                            </button>
                            <button class="quick-action-btn" id="quick-soundboard-btn" data-action="soundboard" data-state="on">
                                <i data-lucide="music"></i>
                                <span data-i18n="dashboard.quick_action.soundboard">Soundboard</span>
                            </button>
                            <button class="quick-action-btn" id="quick-flows-btn" data-action="flows" data-state="on">
                                <i data-lucide="git-branch"></i>
                                <span data-i18n="dashboard.quick_action.flows">Automation Flows</span>
                            </button>
                            <button class="quick-action-btn" id="quick-emoji-rain-btn" data-action="emoji-rain" data-state="on">
                                <i data-lucide="cloud-rain"></i>
                                <span data-i18n="dashboard.quick_action.emoji_rain">Emoji Rain</span>
                            </button>
                            <button class="quick-action-btn" id="quick-osc-bridge-btn" data-action="osc-bridge" data-state="off" data-plugin="osc-bridge">
                                <i data-lucide="gamepad-2"></i>
                                <span data-i18n="dashboard.quick_action.osc_bridge">OSC-Bridge</span>
                            </button>
                        </div>
                    </section>

                    <!-- 3. Live Statistics Section (with Runtime) -->
                    <section class="dashboard-section stats-section">
                        <h2 class="section-title">
                            <i data-lucide="trending-up"></i>
                            <span data-i18n="dashboard.live_statistics">Live Statistics</span>
                        </h2>
                        <div class="stats-grid">
                            <div class="stat-card stat-card-runtime">
                                <div class="stat-icon">
                                    <i data-lucide="clock"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label" data-i18n="dashboard.stats.runtime">Stream Runtime</div>
                                    <div class="stat-value" id="stat-runtime">--:--:--</div>
                                </div>
                                <canvas id="runtime-sparkline" class="stat-sparkline" width="150" height="40"></canvas>
                            </div>
                            <div class="stat-card stat-card-viewers">
                                <div class="stat-icon">
                                    <i data-lucide="users"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label" data-i18n="dashboard.stats.viewers">Viewers</div>
                                    <div class="stat-value" id="stat-viewers">0</div>
                                </div>
                            </div>
                            <div class="stat-card stat-card-likes">
                                <div class="stat-icon">
                                    <i data-lucide="heart"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label" data-i18n="dashboard.stats.likes">Likes</div>
                                    <div class="stat-value" id="stat-likes">0</div>
                                </div>
                            </div>
                            <div class="stat-card stat-card-coins">
                                <div class="stat-icon">
                                    <i data-lucide="coins"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label" data-i18n="dashboard.stats.coins">Coins</div>
                                    <div class="stat-value" id="stat-coins">0</div>
                                </div>
                            </div>
                            <div class="stat-card stat-card-followers">
                                <div class="stat-icon">
                                    <i data-lucide="star"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">Followers</div>
                                    <div class="stat-value" id="stat-followers">0</div>
                                </div>
                            </div>
                            <div class="stat-card stat-card-gifts">
                                <div class="stat-icon">
                                    <i data-lucide="gift"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">Gifts</div>
                                    <div class="stat-value" id="stat-gifts">0</div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 4. Updates / Features / Changelog Section (NEW) -->
                    <section class="dashboard-section updates-section" id="updates-section">
                        <div class="updates-header">
                            <h2 class="section-title">
                                <i data-lucide="sparkles"></i>
                                Updates & Features
                            </h2>
                            <button id="dismiss-updates-btn" class="btn btn-sm btn-ghost">
                                <i data-lucide="x"></i>
                                Ausblenden
                            </button>
                        </div>
                        <div class="updates-content" id="updates-content">
                            <div class="loading-indicator">
                                <i data-lucide="loader"></i>
                                <span>Loading changelog...</span>
                            </div>
                        </div>
                        <button id="show-more-changelog-btn" class="btn btn-sm btn-ghost" style="margin-top: 1rem; display: none;">
                            <i data-lucide="chevron-down"></i>
                            Mehr anzeigen
                        </button>
                    </section>

                    <!-- 5. Plugin & Tool Shortcuts -->
                    <section class="dashboard-section shortcuts-section">
                        <h2 class="section-title">
                            <i data-lucide="grid-3x3"></i>
                            Tools & Plugins
                        </h2>
                        <div class="shortcuts-grid" id="shortcuts-grid">
                            <!-- Will be dynamically populated -->
                        </div>
                    </section>

                    <!-- 6. FAQ / Help Center Section (NEW) -->
                    <section class="dashboard-section faq-section">
                        <h2 class="section-title">
                            <i data-lucide="help-circle"></i>
                            FAQ & Help Center
                        </h2>
                        <div class="faq-accordion" id="faq-accordion">
                            <div class="faq-item">
                                <button class="faq-toggle">
                                    <i data-lucide="chevron-right"></i>
                                    <span>Wie verbinde ich mich mit einem TikTok LIVE Stream?</span>
                                </button>
                                <div class="faq-content">
                                    <p>Geben Sie einfach den TikTok-Benutzernamen (ohne @-Zeichen) in das Eingabefeld ein und klicken Sie auf "Connect". Stellen Sie sicher, dass der Benutzer gerade LIVE ist.</p>
                                    <p><strong>Tipp:</strong> Der Benutzer muss wÃ¤hrend der Verbindung live streamen.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-toggle">
                                    <i data-lucide="chevron-right"></i>
                                    <span>Wie aktiviere ich Text-to-Speech (TTS)?</span>
                                </button>
                                <div class="faq-content">
                                    <p>TTS ist standardmÃ¤ÃŸig aktiviert. Sie kÃ¶nnen es Ã¼ber den grÃ¼nen "Text-to-Speech" Button in den Quick Actions steuern.</p>
                                    <p>FÃ¼r erweiterte Einstellungen gehen Sie zu TTS in der Seitenleiste oder den Settings.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-toggle">
                                    <i data-lucide="chevron-right"></i>
                                    <span>Was sind Automation Flows?</span>
                                </button>
                                <div class="faq-content">
                                    <p>Automation Flows ermÃ¶glichen es Ihnen, automatische Aktionen basierend auf TikTok-Events zu erstellen.</p>
                                    <p>Beispiel: Spielen Sie einen Sound ab, wenn jemand ein bestimmtes Gift sendet, oder zeigen Sie eine Alert an, wenn Sie einen neuen Follower bekommen.</p>
                                    <p><strong>Zugriff:</strong> Klicken Sie auf "Flows" in der Seitenleiste.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-toggle">
                                    <i data-lucide="chevron-right"></i>
                                    <span>Wie fÃ¼ge ich das Overlay zu OBS hinzu?</span>
                                </button>
                                <div class="faq-content">
                                    <p>1. Ã–ffnen Sie OBS Studio</p>
                                    <p>2. FÃ¼gen Sie eine neue "Browser"-Quelle hinzu</p>
                                    <p>3. URL: <code>http://localhost:3000/overlay</code></p>
                                    <p>4. Breite: 1920, HÃ¶he: 1080</p>
                                    <p>5. Aktivieren Sie "Shutdown source when not visible"</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-toggle">
                                    <i data-lucide="chevron-right"></i>
                                    <span>Wo finde ich die System Resources?</span>
                                </button>
                                <div class="faq-content">
                                    <p>Die System-Ressourcen (CPU, RAM, etc.) werden kompakt am Ende des Dashboards angezeigt.</p>
                                    <p>FÃ¼r detaillierte Informationen klicken Sie auf "Resources" in der Seitenleiste oder in den Tools & Plugins.</p>
                                </div>
                            </div>
                            <div class="faq-item">
                                <button class="faq-toggle">
                                    <i data-lucide="chevron-right"></i>
                                    <span>Wie installiere ich neue Plugins?</span>
                                </button>
                                <div class="faq-content">
                                    <p>1. Gehen Sie zum "Plugin Manager" in der Seitenleiste</p>
                                    <p>2. Klicken Sie auf "Upload Plugin (ZIP)"</p>
                                    <p>3. WÃ¤hlen Sie die Plugin-ZIP-Datei aus</p>
                                    <p>4. Das Plugin wird automatisch installiert und aktiviert</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 7. System Resources Section (Compact, at bottom) -->
                    <section class="dashboard-section resource-section-compact">
                        <h2 class="section-title-compact">
                            <i data-lucide="activity"></i>
                            <span>System Resources</span>
                            <a href="#" class="resource-details-link" data-view="resource-monitor" data-plugin="resource-monitor">
                                Details <i data-lucide="arrow-right"></i>
                            </a>
                        </h2>
                        <div class="resource-grid-compact">
                            <div class="resource-card-compact">
                                <div class="resource-info">
                                    <i data-lucide="cpu"></i>
                                    <span class="resource-label">CPU</span>
                                    <span class="resource-value-compact" id="resource-cpu-compact">0%</span>
                                </div>
                                <div class="resource-bar-compact">
                                    <div class="resource-bar-fill-compact" id="resource-cpu-bar-compact" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="resource-card-compact">
                                <div class="resource-info">
                                    <i data-lucide="memory-stick"></i>
                                    <span class="resource-label">RAM</span>
                                    <span class="resource-value-compact" id="resource-ram-compact">0%</span>
                                </div>
                                <div class="resource-bar-compact">
                                    <div class="resource-bar-fill-compact" id="resource-ram-bar-compact" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="resource-card-compact">
                                <div class="resource-info">
                                    <i data-lucide="hard-drive"></i>
                                    <span class="resource-label">GPU</span>
                                    <span class="resource-value-compact" id="resource-gpu-compact">--</span>
                                </div>
                                <canvas id="gpu-sparkline" class="resource-sparkline-compact" width="100" height="20"></canvas>
                            </div>
                            <div class="resource-card-compact">
                                <div class="resource-info">
                                    <i data-lucide="wifi"></i>
                                    <span class="resource-label">Network</span>
                                    <span class="resource-value-compact" id="resource-network-compact">0 KB/s</span>
                                </div>
                                <canvas id="network-sparkline" class="resource-sparkline-compact" width="100" height="20"></canvas>
                            </div>
                        </div>
                    </section>

                </div>

                <!-- View: Events -->
                <div id="view-events" class="content-view">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="activity"></i>
                                Live Event Log
                            </h2>
                            <button id="clear-events-btn" class="btn btn-sm btn-ghost">
                                <i data-lucide="trash-2"></i>
                                Clear
                            </button>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Time</th>
                                        <th>Type</th>
                                        <th>User</th>
                                        <th>Details</th>
                                    </tr>
                                </thead>
                                <tbody id="event-log"></tbody>
                            </table>
                        </div>
                    </section>
                </div>

                <!-- View: Flows -->
                <div id="view-flows" class="content-view">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="git-branch"></i>
                                IFTTT Automation Flows
                            </h2>
                            <div style="display: flex; gap: 12px;">
                                <a href="/ifttt-flow-editor.html" target="_blank" class="btn btn-primary">
                                    <i data-lucide="edit"></i>
                                    Visual Flow Editor
                                </a>
                                <button id="add-flow-btn" class="btn btn-ghost">
                                    <i data-lucide="plus"></i>
                                    Quick Create
                                </button>
                            </div>
                        </div>
                        <div class="bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 mb-4">
                            <div style="display: flex; align-items: center; gap: 12px;">
                                <i data-lucide="zap" style="color: #3b82f6; width: 24px; height: 24px;"></i>
                                <div>
                                    <strong style="color: #60a5fa;">New: Visual IFTTT Flow Editor</strong>
                                    <p style="margin: 4px 0 0 0; font-size: 14px; color: #cbd5e1;">
                                        Create powerful automation flows with drag-and-drop interface. Supports triggers, conditions, actions, and real-time monitoring.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div id="flows-list" class="flows-container"></div>
                    </section>
                </div>

                <!-- View: Goals -->
                <div id="view-goals" class="content-view" data-plugin="goals">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="target"></i>
                                Live Goals
                            </h2>
                            <a href="/goals/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/goals/ui" title="Live Goals Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: TTS -->
                <div id="view-tts" class="content-view" data-plugin="tts">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="mic"></i>
                                TTS v2.0 - Text-to-Speech System
                            </h2>
                            <a href="/plugins/tts/ui/admin-panel.html" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/plugins/tts/ui/admin-panel.html" title="TTS Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Soundboard -->
                <div id="view-soundboard" class="content-view" data-plugin="soundboard">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="music"></i>
                                Soundboard Configuration
                            </h2>
                            <div class="view-header-actions">
                                <a href="/soundboard/ui" target="_blank" class="btn btn-primary" title="Soundboard in separatem Tab Ã¶ffnen fÃ¼r besseres Debugging">
                                    <i data-lucide="external-link"></i>
                                    Open in New Tab
                                </a>
                            </div>
                        </div>
                        
                        
                        <div class="soundboard-content">
                            <!-- Playback Settings -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="settings"></i>
                                    Playback Settings
                                </h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label>Play Mode</label>
                                        <select id="soundboard-play-mode" class="form-select">
                                            <option value="overlap">Overlap (play immediately)</option>
                                            <option value="sequential">Sequential (queue)</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>Max Queue Length</label>
                                        <input type="number" id="soundboard-max-queue" min="1" max="50" value="10" class="form-input">
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="soundboard-enabled" checked>
                                            <span>Enable Soundboard</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Event Sounds -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="volume-2"></i>
                                    Event Sounds
                                </h3>
                                <div class="event-sounds-grid">
                                    <div class="event-sound-item">
                                        <div class="event-sound-header">
                                            <i data-lucide="star"></i>
                                            <span>Follow Sound</span>
                                            <button data-test-sound="follow" class="btn btn-xs btn-ghost">
                                                <i data-lucide="play"></i>
                                            </button>
                                        </div>
                                        <input type="text" id="soundboard-follow-url" placeholder="Sound URL" class="form-input">
                                        <input type="number" id="soundboard-follow-volume" min="0" max="1" step="0.1" value="1.0" placeholder="Volume" class="form-input">
                                    </div>

                                    <div class="event-sound-item">
                                        <div class="event-sound-header">
                                            <i data-lucide="users"></i>
                                            <span>Subscribe Sound</span>
                                            <button data-test-sound="subscribe" class="btn btn-xs btn-ghost">
                                                <i data-lucide="play"></i>
                                            </button>
                                        </div>
                                        <input type="text" id="soundboard-subscribe-url" placeholder="Sound URL" class="form-input">
                                        <input type="number" id="soundboard-subscribe-volume" min="0" max="1" step="0.1" value="1.0" class="form-input">
                                    </div>

                                    <div class="event-sound-item">
                                        <div class="event-sound-header">
                                            <i data-lucide="share-2"></i>
                                            <span>Share Sound</span>
                                            <button data-test-sound="share" class="btn btn-xs btn-ghost">
                                                <i data-lucide="play"></i>
                                            </button>
                                        </div>
                                        <input type="text" id="soundboard-share-url" placeholder="Sound URL" class="form-input">
                                        <input type="number" id="soundboard-share-volume" min="0" max="1" step="0.1" value="1.0" class="form-input">
                                    </div>

                                    <div class="event-sound-item">
                                        <div class="event-sound-header">
                                            <i data-lucide="gift"></i>
                                            <span>Default Gift Sound</span>
                                            <button data-test-sound="gift" class="btn btn-xs btn-ghost">
                                                <i data-lucide="play"></i>
                                            </button>
                                        </div>
                                        <input type="text" id="soundboard-gift-url" placeholder="Sound URL" class="form-input">
                                        <input type="number" id="soundboard-gift-volume" min="0" max="1" step="0.1" value="1.0" class="form-input">
                                    </div>

                                    <div class="event-sound-item">
                                        <div class="event-sound-header">
                                            <i data-lucide="heart"></i>
                                            <span>Like Threshold Sound</span>
                                            <button data-test-sound="like" class="btn btn-xs btn-ghost">
                                                <i data-lucide="play"></i>
                                            </button>
                                        </div>
                                        <input type="text" id="soundboard-like-url" placeholder="Sound URL" class="form-input">
                                        <input type="number" id="soundboard-like-volume" min="0" max="1" step="0.1" value="1.0" class="form-input">
                                        <div class="form-grid">
                                            <input type="number" id="soundboard-like-threshold" min="0" value="0" placeholder="Threshold" class="form-input">
                                            <input type="number" id="soundboard-like-window" min="1" value="10" placeholder="Window (s)" class="form-input">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Gift-Specific Sounds -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="gift"></i>
                                    Gift-Specific Sounds
                                </h3>

                                <!-- Gift Catalog Browser -->
                                <div class="gift-catalog">
                                    <div class="gift-catalog-header">
                                        <h4>Available Gifts from Stream</h4>
                                        <button id="refresh-catalog-btn" class="btn btn-sm btn-primary">
                                            <i data-lucide="refresh-cw" id="refresh-icon"></i>
                                            Refresh Catalog
                                        </button>
                                    </div>
                                    <div id="gift-catalog-info" class="gift-catalog-info"></div>
                                    <div id="gift-catalog-list" class="gift-catalog-grid"></div>
                                </div>

                                <!-- MyInstants Search -->
                                <div class="myinstants-search">
                                    <h4>Search MyInstants</h4>
                                    <div class="search-box">
                                        <input type="text" id="myinstants-search-input" placeholder="Search sounds..." class="form-input">
                                        <button id="myinstants-search-btn" class="btn btn-primary">
                                            <i data-lucide="search"></i>
                                            Search
                                        </button>
                                    </div>
                                    <div id="myinstants-results" class="myinstants-results"></div>
                                </div>

                                <!-- Add Gift Sound -->
                                <div class="add-gift-sound">
                                    <h4>Add/Edit Gift Sound</h4>
                                    <div class="form-grid">
                                        <input type="number" id="new-gift-id" placeholder="Gift ID" readonly class="form-input">
                                        <input type="text" id="new-gift-label" placeholder="Label" readonly class="form-input">
                                        <input type="text" id="new-gift-url" placeholder="MP3 URL" class="form-input">
                                        <input type="number" id="new-gift-volume" min="0" max="1" step="0.1" value="1.0" placeholder="Volume" class="form-input">
                                    </div>
                                    <div class="form-grid">
                                        <input type="text" id="new-gift-animation-url" placeholder="Animation URL (optional)" class="form-input">
                                        <select id="new-gift-animation-type" class="form-select">
                                            <option value="none">No Animation</option>
                                            <option value="image">Image</option>
                                            <option value="video">Video</option>
                                            <option value="gif">GIF</option>
                                        </select>
                                    </div>
                                    <div class="form-actions">
                                        <button id="add-gift-sound-btn" class="btn btn-primary">
                                            <i data-lucide="plus"></i>
                                            Add/Update Gift Sound
                                        </button>
                                        <button id="clear-gift-form-btn" class="btn btn-ghost"data-i18n="dashboard.clear_events">Clear</button>
                                    </div>
                                </div>

                                <!-- Gift Sounds List -->
                                <div class="table-container">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>Gift ID</th>
                                                <th>Label</th>
                                                <th>Sound</th>
                                                <th>Volume</th>
                                                <th>Animation</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="gift-sounds-list"></tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button id="save-soundboard-btn" class="btn btn-primary btn-lg">
                                    <i data-lucide="save"></i>
                                    Save Soundboard Settings
                                </button>
                            </div>
                            
                            <!-- Audio Testing & Permissions -->
                            <div id="audio-test-card" class="settings-card" style="background: linear-gradient(135deg, #1e293b 0%, #334155 100%); border: 1px solid #3b82f6; margin-top: 24px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                                    <h3 class="card-title" style="color: #60a5fa; margin: 0;">
                                        <i data-lucide="volume-2"></i>
                                        Audio System Test & Permissions
                                    </h3>
                                    <button id="minimize-audio-test-btn" class="btn btn-sm btn-ghost" style="padding: 4px 8px;" title="Collapse section" aria-label="Toggle audio test section">
                                        <i data-lucide="chevron-up" style="width: 16px; height: 16px;"></i>
                                    </button>
                                </div>
                                <div id="audio-test-content">
                                    <div class="bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 mb-4">
                                        <div style="display: flex; align-items: center; gap: 12px;">
                                            <i data-lucide="info" style="color: #3b82f6; width: 20px; height: 20px; flex-shrink: 0;"></i>
                                            <span style="font-size: 0.9rem; line-height: 1.5;">
                                                <strong>Important:</strong> Browsers require user interaction before playing audio. 
                                                Click "Enable Audio Permissions" below before testing sounds.
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-bottom: 16px;">
                                        <button id="enable-audio-btn" class="btn btn-primary" style="min-width: 200px;">
                                            <i data-lucide="unlock"></i>
                                            Enable Audio Permissions
                                        </button>
                                        <button id="test-audio-btn" class="btn btn-ghost">
                                            <i data-lucide="play-circle"></i>
                                            Test Audio Playback
                                        </button>
                                        <button id="clear-audio-log-btn" class="btn btn-ghost">
                                            <i data-lucide="trash-2"></i>
                                            Clear Log
                                        </button>
                                    </div>
                                    
                                    <!-- Audio Player for Testing -->
                                    <div id="audio-test-player" style="display: none; margin-bottom: 16px; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px;">
                                        <div style="margin-bottom: 8px; font-size: 0.9rem; color: #94a3b8; font-weight: 600;">Test Audio:</div>
                                        <audio id="test-audio-element" controls style="width: 100%; max-width: 500px;">
                                            <source src="https://www.myinstants.com/media/sounds/wow.mp3" type="audio/mpeg">
                                            Your browser does not support the audio element.
                                        </audio>
                                    </div>
                                    
                                    <!-- Audio Status -->
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 16px;">
                                        <div style="padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(71, 85, 105, 0.5); border-radius: 8px;">
                                            <div style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 4px;">Audio Context:</div>
                                            <div id="audio-context-status" style="font-weight: 600; font-size: 0.95rem;">Checking...</div>
                                        </div>
                                        <div style="padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(71, 85, 105, 0.5); border-radius: 8px;">
                                            <div style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 4px;">Autoplay:</div>
                                            <div id="autoplay-status" style="font-weight: 600; font-size: 0.95rem;">Checking...</div>
                                        </div>
                                        <div style="padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(71, 85, 105, 0.5); border-radius: 8px;">
                                            <div style="font-size: 0.85rem; color: #94a3b8; margin-bottom: 4px;">Active Sounds:</div>
                                            <div id="active-sounds-count" style="font-weight: 600; font-size: 0.95rem; color: #60a5fa;">0</div>
                                        </div>
                                    </div>
                                    
                                    <!-- Debug Log -->
                                    <div style="margin-top: 16px;">
                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                            <span style="font-size: 0.9rem; font-weight: 600; color: #e2e8f0;">Audio Debug Log</span>
                                            <label style="display: flex; align-items: center; gap: 8px; font-size: 0.85rem; cursor: pointer;">
                                                <input type="checkbox" id="verbose-logging" checked style="cursor: pointer;">
                                                <span style="color: #cbd5e1;">Show Verbose Logs</span>
                                            </label>
                                        </div>
                                        <div style="background: rgba(0,0,0,0.4); border: 1px solid rgba(71, 85, 105, 0.5); border-radius: 8px; margin-bottom: 8px; padding: 8px 12px;">
                                            <div style="font-size: 0.8rem; color: #94a3b8;">
                                                <i data-lucide="info" style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 4px;"></i>
                                                Critical events (play, error) are always logged. Verbose mode shows additional diagnostic information.
                                            </div>
                                        </div>
                                        <div id="audio-debug-log" style="background: #0f172a; border: 1px solid #334155; border-radius: 8px; padding: 12px; max-height: 300px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 0.85rem; line-height: 1.6;">
                                            <div style="color: #60a5fa;">ðŸŽµ Audio system ready. Waiting for events...</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>

                <!-- View: Emoji Rain -->
                <div id="view-emoji-rain" class="content-view" data-plugin="emoji-rain">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="cloud-rain"></i>
                                Emoji Rain v2.0
                            </h2>
                            <a href="/emoji-rain/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/emoji-rain/ui" title="Emoji Rain Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Multi-Guest -->
                <div id="view-multi-guest" class="content-view" data-plugin="vdoninja">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="users"></i>
                                VDO.Ninja Multi-Guest
                            </h2>
                        </div>
                        <!-- Content from original multiGuest tab -->
                        <div class="vdo-content">
                            <p class="text-gray-400">VDO.Ninja Multi-Guest controls will be integrated here...</p>
                        </div>
                    </section>
                </div>

                <!-- View: Gift Milestone -->
                <div id="view-gift-milestone" class="content-view" data-plugin="gift-milestone">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="gift"></i>
                                Gift Milestone Celebration
                            </h2>
                            <a href="/gift-milestone/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/gift-milestone/ui" title="Gift Milestone Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Multi-Cam -->
                <div id="view-multicam" class="content-view" data-plugin="multicam">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="video"></i>
                                Multi-Cam Switcher
                            </h2>
                            <a href="/plugins/multicam/ui.html" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/plugins/multicam/ui.html" title="Multi-Cam Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: OSC-Bridge -->
                <div id="view-osc-bridge" class="content-view" data-plugin="osc-bridge">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="gamepad-2"></i>
                                OSC-Bridge (VRChat)
                            </h2>
                            <a href="/plugins/osc-bridge/ui.html" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/plugins/osc-bridge/ui.html" title="OSC-Bridge Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: HybridShock -->
                <div id="view-hybridshock" class="content-view" data-plugin="hybridshock">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="zap"></i>
                                HybridShock Integration
                            </h2>
                            <a href="/hybridshock/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/hybridshock/ui" title="HybridShock Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: OpenShock -->
                <div id="view-openshock" class="content-view" data-plugin="openshock">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="zap"></i>
                                OpenShock Integration
                            </h2>
                            <a href="/openshock/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/openshock/ui" title="OpenShock Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Quiz Show -->
                <div id="view-quiz-show" class="content-view" data-plugin="quiz-show">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="help-circle"></i>
                                Quiz Show
                            </h2>
                            <a href="/quiz-show/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/quiz-show/ui" title="Quiz Show Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Viewer XP -->
                <div id="view-viewer-xp" class="content-view" data-plugin="viewer-xp">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="award"></i>
                                Viewer XP System
                            </h2>
                            <a href="/viewer-xp/admin" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/viewer-xp/admin" title="Viewer XP Admin Panel"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Resource Monitor -->
                <div id="view-resource-monitor" class="content-view" data-plugin="resource-monitor">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="cpu"></i>
                                System Resource Monitor
                            </h2>
                            <a href="/resource-monitor/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/resource-monitor/ui" title="Resource Monitor"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Weather Control -->
                <div id="view-weather-control" class="content-view" data-plugin="weather-control">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="cloud-rain"></i>
                                Weather Control System
                            </h2>
                            <a href="/weather-control/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/weather-control/ui" title="Weather Control"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: LastEvent Spotlight -->
                <div id="view-lastevent-spotlight" class="content-view" data-plugin="lastevent-spotlight">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="eye"></i>
                                LastEvent Spotlight
                            </h2>
                            <a href="/lastevent-spotlight/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/lastevent-spotlight/ui" title="LastEvent Spotlight"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: ClarityHUD -->
                <div id="view-clarityhud" class="content-view" data-plugin="clarityhud">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="layout"></i>
                                ClarityHUD
                            </h2>
                            <a href="/clarityhud/ui" target="_blank" class="btn btn-sm btn-ghost">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </a>
                        </div>
                        <div class="iframe-container">
                            <iframe src="/clarityhud/ui" title="ClarityHUD Configuration"></iframe>
                        </div>
                    </section>
                </div>

                <!-- View: Plugin Manager -->
                <div id="view-plugins" class="content-view">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="package"></i>
                                Plugin Manager
                            </h2>
                            <div style="display: flex; gap: 12px;">
                                <button id="upload-plugin-btn" class="btn btn-primary">
                                    <i data-lucide="upload"></i>
                                    Upload Plugin (ZIP)
                                </button>
                                <button id="reload-plugins-btn" class="btn btn-ghost">
                                    <i data-lucide="refresh-cw"></i>
                                    Reload All
                                </button>
                            </div>
                        </div>
                        <input type="file" id="plugin-file-input" accept=".zip" style="display: none;">
                        
                        <!-- Plugin Stats Overview -->
                        <div id="plugin-stats" class="stats-grid" style="margin-bottom: 1.5rem;">
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                                    <i data-lucide="check-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">Active Plugins</div>
                                    <div class="stat-value" id="stat-active-plugins">0</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);">
                                    <i data-lucide="pause-circle"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">Inactive Plugins</div>
                                    <div class="stat-value" id="stat-inactive-plugins">0</div>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                                    <i data-lucide="package"></i>
                                </div>
                                <div class="stat-content">
                                    <div class="stat-label">Total Plugins</div>
                                    <div class="stat-value" id="stat-total-plugins">0</div>
                                </div>
                            </div>
                        </div>

                        <!-- Filters and Search -->
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: 12px; padding: 1rem; margin-bottom: 1.5rem;">
                            <div style="display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
                                <div style="flex: 1; min-width: 250px;">
                                    <div style="position: relative;">
                                        <i data-lucide="search" style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); width: 18px; height: 18px; color: #9ca3af;"></i>
                                        <input type="text" id="plugin-search" placeholder="Search plugins..." 
                                               style="width: 100%; padding: 0.75rem 1rem 0.75rem 2.75rem; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: white; font-size: 0.95rem;">
                                    </div>
                                </div>
                                <div style="display: flex; gap: 0.5rem;">
                                    <button class="plugin-filter-btn active" data-filter="all" style="padding: 0.75rem 1.25rem; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 8px; color: #60a5fa; font-size: 0.9rem; cursor: pointer; transition: all 0.2s;">
                                        <i data-lucide="grid-3x3" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 6px;"></i>
                                        All
                                    </button>
                                    <button class="plugin-filter-btn" data-filter="active" style="padding: 0.75rem 1.25rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: #9ca3af; font-size: 0.9rem; cursor: pointer; transition: all 0.2s;">
                                        <i data-lucide="check-circle" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 6px;"></i>
                                        Active
                                    </button>
                                    <button class="plugin-filter-btn" data-filter="inactive" style="padding: 0.75rem 1.25rem; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: #9ca3af; font-size: 0.9rem; cursor: pointer; transition: all 0.2s;">
                                        <i data-lucide="pause-circle" style="width: 16px; height: 16px; vertical-align: middle; margin-right: 6px;"></i>
                                        Inactive
                                    </button>
                                </div>
                                <select id="plugin-sort" style="padding: 0.75rem 1rem; background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px; color: white; font-size: 0.9rem; cursor: pointer;">
                                    <option value="name">Sort by Name</option>
                                    <option value="status">Sort by Status</option>
                                    <option value="type">Sort by Type</option>
                                    <option value="author">Sort by Author</option>
                                </select>
                            </div>
                        </div>

                        <div id="plugins-container" class="space-y-4">
                            <!-- Plugin list will be populated by plugin-manager.js -->
                        </div>
                    </section>
                </div>

                <!-- View: Wiki -->
                <div id="view-wiki" class="content-view">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="book-open"></i>
                                Wiki & Documentation
                            </h2>
                            <button id="wiki-open-new-tab" class="btn btn-primary" style="margin-left: auto;" title="Open in new tab">
                                <i data-lucide="external-link"></i>
                                Open in New Tab
                            </button>
                        </div>
                        <div class="wiki-container">
                            <!-- Wiki Sidebar -->
                            <aside class="wiki-sidebar">
                                <!-- Search -->
                                <div class="wiki-search-container">
                                    <div class="wiki-search-input-wrapper">
                                        <i data-lucide="search"></i>
                                        <input 
                                            type="text" 
                                            id="wiki-search" 
                                            class="wiki-search-input" 
                                            placeholder="Search documentation..."
                                            autocomplete="off"
                                        >
                                    </div>
                                </div>
                                
                                <!-- Navigation -->
                                <nav id="wiki-nav" class="wiki-nav">
                                    <!-- Navigation will be populated by wiki.js -->
                                </nav>
                            </aside>
                            
                            <!-- Wiki Content Area -->
                            <main class="wiki-content">
                                <div id="wiki-article" class="wiki-article">
                                    <!-- Article content will be loaded by wiki.js -->
                                    <div class="wiki-loading">
                                        <i data-lucide="loader"></i>
                                        <span>Loading documentation...</span>
                                    </div>
                                </div>
                            </main>
                        </div>
                    </section>
                </div>

                <!-- View: Settings -->
                <div id="view-settings" class="content-view">
                    <section class="view-section">
                        <div class="view-header">
                            <h2 class="view-title">
                                <i data-lucide="settings"></i>
                                Settings
                            </h2>
                        </div>
                        <div class="settings-content">
                            <!-- General Settings -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="sliders"></i>
                                    <span data-i18n="settings.general">General Settings</span>
                                </h3>
                                <div class="form-grid">
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="auto-connect-enabled">
                                            <spandata-i18n="settings.auto_connect">Auto-connect to last TikTok user on startup</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="auto-update-check" checked>
                                            <spandata-i18n="settings.auto_update_check">Check for updates on startup</span>
                                        </label>
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="update-notifications" checked>
                                            <spandata-i18n="settings.show_update_notifications">Show update notifications</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- Language Settings -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="globe"></i>
                                    <span data-i18n="settings.language">Language</span>
                                </h3>
                                <p class="text-sm text-gray-400 mb-4" data-i18n="settings.select_language">
                                    Select your preferred language
                                </p>
                                <div class="form-group">
                                    <label data-i18n="settings.language">Language</label>
                                    <select id="language-selector" class="form-input">
                                        <option value="en">English</option>
                                        <option value="de">Deutsch</option>
                                        <option value="es">EspaÃ±ol</option>
                                        <option value="fr">FranÃ§ais</option>
                                    </select>
                                </div>
                                <div class="mt-2 text-sm text-gray-400">
                                    <i data-lucide="info" class="inline-block w-4 h-4 mr-1"></i>
                                    <span>Language changes apply immediately</span>
                                </div>
                            </div>

                            <!-- Auto-Start Settings -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="power"></i>
                                    Auto-Start on System Boot
                                </h3>
                                <div class="bg-gray-700 rounded-lg p-4 mb-4">
                                    <div class="grid grid-cols-2 gap-4 text-sm mb-4">
                                        <div>
                                            <span class="text-gray-400">Platform:</span>
                                            <span id="autostart-platform-name" class="ml-2">-</span>
                                        </div>
                                        <div>
                                            <span class="text-gray-400">Status:</span>
                                            <span id="autostart-status" class="ml-2">Checking...</span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="checkbox-label">
                                            <input type="checkbox" id="autostart-enabled">
                                            <spandata-i18n="settings.enable_auto_start">Enable Auto-Start</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- EulerStream API Credentials -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="key"></i>
                                    EulerStream API Key
                                </h3>
                                <p class="text-sm text-gray-400 mb-4">
                                    EulerStream API key for TikTok connection. Get your free API key at <a href="https://www.eulerstream.com" target="_blank" class="text-blue-400 hover:text-blue-300">eulerstream.com</a>.
                                </p>
                                <div class="form-group">
                                    <label>API Key</label>
                                    <input type="text" id="tiktok-euler-api-key" class="form-input" placeholder="euler_... or Webhook Secret (64-char hex)">
                                    <p class="text-xs text-gray-500 mt-1">Starts with "euler_" or 64-character hexadecimal Webhook Secret</p>
                                </div>
                                <button id="save-tiktok-credentials" class="btn btn-primary">
                                    <i data-lucide="save"></i>
                                    Save API Key
                                </button>
                            </div>

                            <!-- User Profiles -->
                            <div class="settings-card">
                                <h3 class="card-title">
                                    <i data-lucide="users"></i>
                                    User Profiles
                                </h3>
                                <p class="text-sm text-gray-400 mb-4">
                                    Switch between different configurations for different streaming setups.
                                </p>
                                <div class="bg-blue-900/20 border border-blue-500/30 rounded-lg p-4 mb-4">
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <span style="font-weight: 600;">Active Profile:</span>
                                        <span id="active-profile-display" style="color: #60a5fa;">default</span>
                                    </div>
                                    <p style="font-size: 0.85rem; color: #94a3b8; margin-top: 8px;">
                                        âš ï¸ Profile changes require application restart
                                    </p>
                                </div>
                                <div id="profile-list" class="space-y-2 mb-4">
                                    <!-- Profiles will be loaded dynamically -->
                                </div>
                                <div class="form-group">
                                    <label>Create New Profile</label>
                                    <div style="display: flex; gap: 8px;">
                                        <input type="text" id="new-profile-username" placeholder="Profile Name" class="form-input">
                                        <button id="create-profile-btn" class="btn btn-primary">
                                            <i data-lucide="plus"></i>
                                            Create
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>


    <!-- Modal: Create Flow -->
    <div id="flow-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i data-lucide="git-branch"></i>
                    Create Automation Flow
                </h3>
                <button id="flow-modal-close" class="modal-close">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="flow-name">Flow Name</label>
                    <input type="text" id="flow-name" placeholder="e.g., Thank you for big gifts" class="form-input">
                </div>
                <div class="form-group">
                    <label for="flow-trigger-type">Trigger Event</label>
                    <select id="flow-trigger-type" class="form-select">
                        <option value="gift">ðŸŽ Gift Received</option>
                        <option value="follow">â­ New Follow</option>
                        <option value="subscribe">ðŸŒŸ New Subscribe</option>
                        <option value="share">ðŸ”„ Stream Shared</option>
                        <option value="like">â¤ï¸ Likes</option>
                        <option value="chat">ðŸ’¬ Chat Message</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="flow-action-type">Action Type</label>
                    <select id="flow-action-type" class="form-select">
                        <option value="alert">ðŸ”” Show Alert</option>
                        <option value="webhook">ðŸŒ Webhook (HTTP Request)</option>
                    </select>
                </div>
                <div id="alert-settings" class="form-group">
                    <label for="flow-action-text">Alert Text (supports variables)</label>
                    <textarea id="flow-action-text" placeholder="e.g., Thank you {username} for {gift_name}!" class="form-textarea"></textarea>
                    <p class="form-help">Available variables: {username}, {gift_name}, {coins}, {message}</p>
                </div>
                <div id="webhook-settings" class="form-group" style="display: none;">
                    <label for="flow-webhook-url">Webhook URL</label>
                    <input type="text" id="flow-webhook-url" placeholder="https://webhook.site/..." class="form-input">
                    <p class="form-help">Allowed domains: webhook.site, discord.com, zapier.com, ifttt.com, make.com</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="flow-modal-save-btn" class="btn btn-primary">
                    <i data-lucide="check"></i>
                    Create Flow
                </button>
                <button id="flow-modal-cancel-btn" class="btn btn-ghost">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Audio Elements for Dashboard Playback -->
    <audio id="dashboard-tts-audio"></audio>
    <div id="dashboard-soundboard-pool"></div>

    <!-- Scripts -->
    <!-- Theme manager must load early to prevent flash of unstyled content -->
    <script src="/js/theme-manager.js"></script>
    <!-- i18n client must load early for translations -->
    <script src="/js/i18n-client.js"></script>
    <!-- Audio unlock must load first to handle autoplay restrictions -->
    <script src="/js/audio-unlock.js"></script>
    <!-- Initialization helper to prevent race conditions -->
    <script src="/js/init-helper.js"></script>
    <script src="/js/dashboard.js"></script>
    <script src="/js/navigation.js"></script>
    <script src="/js/dashboard-enhancements.js"></script>
    <script src="/js/vdoninja-dashboard.js"></script>
    <script src="/js/plugin-manager.js"></script>
    <script src="/js/update-checker.js"></script>
    <script src="/js/audio-settings.js"></script>
    <script src="/js/debug-panel.js"></script>
    <script src="/js/wiki.js"></script>
    <script src="/js/init-language-switchers.js"></script>
    <script src="/js/cloud-sync-settings.js"></script>
</body>
</html>
